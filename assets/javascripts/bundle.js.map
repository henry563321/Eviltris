{"version":3,"sources":["webpack/bootstrap 8c230de944bb40a82f1e","./frontend/helper.js","./frontend/index.js","./frontend/control.js","./frontend/pieces.js","./frontend/board.js","./frontend/UI.js"],"names":["transpose","matrix","i","length","j","map","row","reverse","bang","piece","board","x","y","document","addEventListener","canvas","getElementById","control","controlboard","ui","Controller","counter","score","scoreboard","showscoreboard","colors","showscore","keyboard","bind","dropdown","game","ctx","getContext","font","clearRect","fillText","sort","a","b","nextPiece","Object","assign","removeBoard","removeItems","merge","linetest","gameover","push","displayBoard","displayItems","requestAnimationFrame","cancelAnimationFrame","forEach","posx","item","posy","pieceOb","fillStyle","fillRect","items","dir","clone","clonearray","event","keyCode","moveitem","transposeitem","dropitem","pieceI","pieceJ","pieceL","pieceS","pieceT","pieceO","pieceZ","pieces","Piece","randomPiece","Array","fill","Math","floor","random","piecescore","search","validy","piecepos","cloneboard","splice","unshift","Board","createMatrix","UI","controller","startGame","pauseGame","restartGame","restart"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8c230de944bb40a82f1e","export const transpose = (matrix) => {\n    for(let i = 0; i < matrix.length; i++) {\n      for(let j = i; j < matrix[0].length; j++) {\n        [matrix[i][j], matrix[j][i]] = [matrix[j][i], matrix[i][j]];\n      }\n    }\n    matrix.map((row) => row.reverse());\n    return matrix;\n};\n\nexport const bang = (piece, board) => {\n  for(let x = 0; x < piece.piece.length; x++) {\n    for(let y = 0; y < piece.piece[0].length; y++) {\n      if (piece.piece[y][x] !== 0 && (board[y + piece.y/30]\n        && board[y + piece.y/30][x + piece.x/30]) !== 0) {\n          return true;\n        }\n    }\n  }\n  return false;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/helper.js","import Controller from './control.js';\nimport UI from './UI.js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\nconst canvas = document.getElementById('canvas');\nconst control = new Controller(canvas);\nconst controlboard = document.getElementById('controlboard');\nconst ui = new UI(control);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/index.js","import Piece from './pieces.js';\nimport Board from './board.js';\nimport {bang, transpose} from './helper.js';\n\nclass Controller {\n  constructor(canvas) {\n    this.counter = 0;\n    this.canvas = canvas;\n    this.piece = new Piece();\n    this.board = new Board();\n    this.score = 0;\n    this.scoreboard = [];\n    this.showscoreboard();\n    this.colors = [null, 'red', 'magenta', 'yellow', 'cyan', 'silver', 'lightgreen', 'blue'];\n    this.showscore();\n    this.keyboard = this.keyboard.bind(this);\n    this.dropdown = this.dropdown.bind(this);\n    this.keyboard();\n    this.game = {};\n  }\n\n  showscore() {\n    const scoreboard = document.getElementById('scoreboard');\n    var ctx = scoreboard.getContext(\"2d\");\n    ctx.font = \"30px Arial\";\n    ctx.clearRect(0, 400, 200, 200);\n    ctx.fillText(`score: ${this.board.score}`, 10, 450);\n  }\n\n  showscoreboard() {\n    const scoreboard = document.getElementById('scoreboard');\n    this.scoreboard = this.scoreboard.sort((a,b) => {return b - a;});\n    var ctx = scoreboard.getContext(\"2d\");\n    ctx.font = \"30px Arial\";\n    ctx.clearRect(0,0,200,400);\n    ctx.fillText(`ScoreBoard`, 10, 50);\n    let i = 0;\n    while (i < 5) {\n      if( this.scoreboard[i] ) {\n        ctx.fillText(`${i + 1}  score: ${this.scoreboard[i]}`, 10, 60 * (i + 1) + 50);\n      } else {\n        ctx.fillText(`${i + 1}  score: 0`, 10, 60 * (i + 1) + 50);\n      }\n      i++;\n    }\n  }\n\n  dropdown() {\n    this.counter += 20;\n    if (this.counter === 500) {\n      this.counter = 0;\n      let nextPiece = Object.assign({},this.piece.piece);\n      nextPiece.y += 30;\n      if (bang(nextPiece, this.board.board)) {\n        this.removeBoard(this.board.board);\n        this.removeItems(this.piece.piece);\n        this.board.merge(this.piece.piece);\n        this.board.linetest();\n        this.showscore();\n        this.score = this.board.score;\n        if (this.board.gameover()) {\n          this.scoreboard.push(this.score);\n          this.board = new Board();\n          this.piece = new Piece();\n          this.piece.y -= 30;\n          this.showscore();\n          this.showscoreboard();\n        } else {\n        this.piece = new Piece(this.board.board);\n        this.counter = 0;\n        }\n        this.displayBoard(this.board.board);\n      }\n      this.removeItems(this.piece.piece);\n      this.piece.piece.y += 30;\n      this.displayItems(this.piece.piece);\n    }\n    this.game = requestAnimationFrame(this.dropdown);\n  }\n\n  restart() {\n    this.removeBoard(this.board.board);\n    this.removeItems(this.piece.piece);\n    this.board = new Board();\n    this.piece = new Piece();\n    this.piece.y -= 30;\n    this.showscore();\n    this.showscoreboard();\n    this.displayBoard(this.board.board);\n    this.piece.piece.y += 30;\n    this.displayItems(this.piece.piece);\n    cancelAnimationFrame(this.game);\n    this.dropdown();\n  }\n\n\n\n  removeBoard(board) {\n    board.forEach( (row, posx) => {\n      row.forEach((item, posy) => {\n        if(item !== 0) {\n          var pieceOb = this.canvas.getContext('2d');\n          pieceOb.clearRect(30 * posy, 30 * posx, 30, 30);\n        }\n      });\n    });\n  }\n\n\n\n  displayBoard(board) {\n    board.forEach( (row, posx) => {\n      row.forEach((item, posy) => {\n        if(item !== 0) {\n          var ctx = this.canvas.getContext('2d');\n          ctx.fillStyle = 'black';\n          ctx.fillRect(30 * posy, 30 * posx, 30, 30);\n          ctx.clearRect(30 * posy + 5, 30 * posx + 5, 20, 20);\n          ctx.fillStyle = this.colors[item];\n          ctx.fillRect(30 * posy + 5, 30 * posx + 5, 20, 20);\n        }\n      });\n    });\n  }\n\n\n  removeItems(items) {\n    items.piece.forEach( (row, posx) => {\n      row.forEach((item, posy) => {\n        if(item !== 0) {\n          var pieceOb = this.canvas.getContext('2d');\n          pieceOb.clearRect(items.x + 30 * posy, items.y + 30 * posx, 30, 30);\n        }\n      });\n    });\n  }\n\n\n\n  displayItems(items) {\n    items.piece.forEach( (row, posx) => {\n      row.forEach((item, posy) => {\n        if(item !== 0) {\n          var ctx = this.canvas.getContext('2d');\n          ctx.fillStyle = 'black';\n          ctx.fillRect(items.x + 30 * posy, items.y + 30 * posx, 30, 30);\n          ctx.clearRect(items.x + 30 * posy + 5, items.y + 30 * posx + 5, 20, 20);\n          ctx.fillStyle = this.colors[item];\n          ctx.fillRect(items.x + 30 * posy + 5, items.y + 30 * posx + 5, 20, 20);\n        }\n      });\n    });\n  }\n\n  moveitem(dir) {\n    let nextPiece = Object.assign({},this.piece.piece);\n    nextPiece.x += dir;\n    if (!bang(nextPiece, this.board.board)) {\n      this.removeItems(this.piece.piece);\n      this.piece.piece.x += dir;\n      this.displayItems(this.piece.piece);\n    }\n  }\n\n  dropitem() {\n    let nextPiece = Object.assign({},this.piece.piece);\n    nextPiece.y += 30;\n    if (!bang(nextPiece, this.board.board)) {\n      this.removeItems(this.piece.piece);\n      this.piece.piece.y += 30;\n      this.displayItems(this.piece.piece);\n    }\n  }\n\n  transposeitem() {\n    let nextPiece = Object.assign({},this.piece.piece);\n    let clone = [];\n    for (let i = 0; i < this.piece.piece.piece.length; i++) {\n      let clonearray = [];\n      for (let j = 0; j < this.piece.piece.piece.length; j++) {\n        clonearray.push(this.piece.piece.piece[i][j]);\n      }\n      clone.push(clonearray);\n    }\n    transpose(clone);\n    nextPiece.piece = clone;\n    if (!bang(nextPiece, this.board.board)) {\n      this.removeItems(this.piece.piece);\n      this.piece.piece.piece = transpose(this.piece.piece.piece);\n      this.displayItems(this.piece.piece);\n    }\n  }\n\n\n\n  keyboard() {\n    document.addEventListener('keydown', (event) => {\n        //left\n      if(event.keyCode === 37) {\n        this.moveitem(-30);\n      }\n      //top\n      else if(event.keyCode === 38) {\n          this.transposeitem();\n      }\n      //right\n      else if(event.keyCode === 39) {\n          this.moveitem(+30);\n      }\n      //bottom\n      else if(event.keyCode === 40) {\n          this.dropitem();\n      }\n    });\n  }\n}\n\nexport default Controller;\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/control.js","import {bang, transpose} from './helper';\n\nconst pieceI = [\n  [0, 1, 0, 0],\n  [0, 1, 0, 0],\n  [0, 1, 0, 0],\n  [0, 1, 0, 0],\n];\nconst pieceJ = [\n  [0, 2, 0],\n  [0, 2, 0],\n  [2, 2, 0]\n];\nconst pieceL = [\n  [0, 3, 0],\n  [0, 3, 0],\n  [0, 3, 3]\n];\n\nconst pieceS = [\n  [0, 4, 4],\n  [4, 4, 0],\n  [0, 0, 0]\n];\nconst pieceT = [\n  [0, 0, 0],\n  [5, 5, 5],\n  [0, 5, 0]\n];\nconst pieceO = [\n  [6, 6],\n  [6, 6]\n];\nconst pieceZ = [\n  [7, 7, 0],\n  [0, 7, 7],\n  [0, 0, 0]\n];\n\nconst pieces = [pieceI, pieceJ, pieceL, pieceS, pieceT, pieceO, pieceZ];\n\nclass Piece {\n  constructor(board = []) {\n    this.board = board;\n    if (board.length === 0) {\n      this.piece = {x: 120, y: 0, piece: this.randomPiece()};\n    } else {\n      this.piece = {x: 120, y: 0, piece: this.nextPiece()};\n    }\n    this.score = new Array(7).fill(0);\n  }\n  randomPiece() {\n    return pieces[Math.floor(Math.random()*pieces.length)];\n  }\n\n  nextPiece() {\n    let piecescore = [{piece: pieces[0], score: 0},\n    {piece: pieces[1], score: 0},\n    {piece: pieces[2], score: 0},\n    {piece: pieces[3], score: 0},\n    {piece: pieces[4], score: 0},\n    {piece: pieces[5], score: 0},\n    {piece: pieces[6], score: 0}];\n    for(let x = 0; x < this.board[0].length; x++) {\n      const y = this.search(this.board, x);\n      for (let i = 0; i < 7; i++) {\n        for (let j = 0; j < 4; j++) {\n          if (this.score(x, y, this.board, piecescore[i].piece) > piecescore[i].score) {\n            piecescore[i].score = this.score(x, y, this.board, piecescore[i].piece);\n          }\n          piecescore[i].piece = transpose(piecescore[i].piece);\n        }\n      }\n    }\n    piecescore.sort((a,b) => {return a.score - b.score;});\n    return piecescore[Math.floor(Math.random()*(piecescore.length - 1))].piece;\n  }\n\n  search(board, x) {\n    for(let y = 0; y < board.length; y++) {\n      if (board[y][x] !== 0) {\n        return y;\n      }\n    }\n    return 19;\n  }\n\n  score(x, y, board, piece) {\n    const validy = this.piecepos(x, y, board, piece);\n    let cloneboard = [];\n    for (let i = 0; i < board.length; i++) {\n      let clonearray = [];\n      for (let j = 0; j < board[0].length; j++) {\n        clonearray.push(board[i][j]);\n      }\n      cloneboard.push(clonearray);\n    }\n    cloneboard = this.merge(cloneboard, x, validy, piece);\n    return this.linetest(cloneboard);\n  }\n\n  piecepos(x, y, board, piece) {\n    while(y > 3 && bang({x: 30 * x, y: 30 * y, piece: piece}, board)) {\n      y--;\n    }\n    return y;\n  }\n\n  merge(board, posx, posy, piece) {\n    for(let x = 0; x < piece.length; x++) {\n      for(let y = 0; y < piece[0].length; y++) {\n        if (piece[y][x] !== 0) {\n          board[y + posy][x + posx] = piece[y][x];\n        }\n      }\n    }\n    return board;\n  }\n\n  linetest(board) {\n    let score = 0;\n    row: for (let i = 0; i < board.length; i++) {\n      for (let j = 0; j < board[0].length; j++) {\n        if (board[i][j] === 0) {\n          continue row;\n        }\n      }\n      board.splice(i, 1);\n      score += 100;\n      board.unshift(new Array(10).fill(0));\n    }\n    return score;\n  }\n\n\n\n}\n\nexport default Piece;\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/pieces.js","class Board {\n  constructor() {\n    this.board = this.createMatrix();\n    this.merge = this.merge.bind(this);\n    this.score = 0;\n  }\n\n  merge(piece) {\n    for(let x = 0; x < piece.piece.length; x++) {\n      for(let y = 0; y < piece.piece[0].length; y++) {\n        if (piece.piece[y][x] !== 0) {\n          this.board[y + piece.y/30][x + piece.x/30] = piece.piece[y][x];\n        }\n      }\n    }\n  }\n\n  createMatrix() {\n    const matrix = [];\n    for (let i = 0; i < 20; i++) {\n      matrix.push(new Array(10).fill(0));\n    }\n    return matrix;\n  }\n\n  linetest() {\n    row: for (let i = 0; i < this.board.length; i++) {\n      for (let j = 0; j < this.board[0].length; j++) {\n        if (this.board[i][j] === 0) {\n          continue row;\n        }\n      }\n      this.board.splice(i, 1);\n      this.score += 100;\n      this.board.unshift(new Array(10).fill(0));\n    }\n  }\n\n  gameover() {\n    for(let i = 0; i < this.board[0].length; i++) {\n      if (this.board[3][i] !== 0 ) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n}\n\nexport default Board;\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/board.js","class UI {\n  constructor(controller) {\n    this.control = controller;\n    const startGame = document.getElementById('startbutton');\n    startGame.addEventListener('click', () => {requestAnimationFrame(this.control.dropdown);});\n    const pauseGame = document.getElementById('pausebutton');\n    pauseGame.addEventListener('click', () => {cancelAnimationFrame(this.control.game);});\n    const restartGame = document.getElementById('restartbutton');\n    restartGame.addEventListener('click', () => {this.control.restart();});\n  }\n\n\n}\nexport default UI;\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/UI.js"],"sourceRoot":""}